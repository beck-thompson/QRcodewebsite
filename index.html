<!DOCTYPE html>

<html>
  <head>
    <link rel="stylesheet" href="style.css">
        <script src="script.js" defer></script>
  </head>

  <body>
    <div class="content">
      <h2>
        How to decode QR codes by hand
      </h2>
      <div id="subtitle">It's easier than you'd think!</div>
      <div id="date"> June 11, 2022</div>

      <p>QR codes are everywhere! From ordering food to getting event info I'm contstantly scanning them. I've always thought they were extremely complex and only veteran programers could understand their inner workings.</p>
      <p>However, that <b> is not </b> true! They are actaully quite simple and hopefully, after reading this article, you will have a basic understanding of how they work.</p>

      <h3>What are QR codes?</h3>

      <p>[They mostly used just for links other basic information.]<p>

      <h3>QR code "zones"</h3>
      <p>Before you can decode QR codes you have to know the different parts of a QR code!<p>
      <p>QR codes contain 3 "zones":</p>
      <ul>
        <li style="color: PaleVioletRed;">Camera alignment</li>
        <li style="color: blue;">Formating data</li>
        <li style="color: green;">Data</li>
      </ul>

      <div style="display: inline-block;">
        <div style="border-style: solid;border-color: gray;border-width: 0px; float:left; margin-right: 50px;">
          <canvas width = "420" height = "420" id="canvas"></canvas>
        </div>

        <div style="border-style: solid; border-color: black; border-width: 2px; float:right; display:block; padding-right:3px;">

          <div>
          <input type="checkbox" class="checkbox1" id="grid" checked>
          <label>Grid</label>
          </div>

          <div>
          <input type="checkbox" class="checkbox1" id="camera_alignment">
          <label style="color:MediumVioletRed;">Camera alignment</label>
          </div>

          <div>
          <input type="checkbox" class="checkbox1" id="formating_data">
          <label style="color:blue;">Formating data</label>
          </div>

          <div>
          <input type="checkbox" class="checkbox1" id="data">
          <label style="color:green;">Data</label>
          </div>

        </div>

      </div>

      <p>The names are mostly self explanatory!</p>
      <p>The <b>camera alignment</b> (Pink) section is for helping cameras align the QR code correctly.</p>
      <p>The <b>formating data</b> (Blue) section contains general formating information for the QR code. This includes the error correction level and mask pattern and "Dark Module"!</p>
      <p>The <b>data</b> (Green)section contains the actual data (Usually a hyperlink!) and all error correction partity data.</p>
      <p>I will go over all these sections in detail.</p>

      <h3>Camera alignment</h3>
      <p>The camera alignment zone only has two parts:</p>
      <ul>
        <li style="color: red;">Position squares</li>
        <li style="color: orange;">Timing belts</li>
      </ul>
      <p>Both of these are just so cameras can align the QR code properly so the data can be easily read. The position squares are on 3 corners of the QR code and look like this:</p>
      <img src="position_square.png" alt="Position square!">
      <p>The timing belts connect each position square and always alternate between black and white pixles as seen here:</p>
      <img src="timing_belt.png" alt="Timing belt!">

      <h3>Formating data</h3>
      <p>The formating data is stored next to the camera alignment boxes. This data is:</p>
      <ul>
        <li style="color: blue;">Error correction format <a style="color:black;"><b>[0-9]  </b></a></li>
        <li style="color: Lime;">Mask pattern            <a style="color:black;"><b>[10-11]</b></a></li>
        <li style="color: red;">Error correction level   <a style="color:black;"><b>[13-14]</b></a></li>
        <li style="color: purple;">The "Dark Module"     <a style="color:black;"><b>[]</b></a></li>
      </ul>
      <p>All data is duplicated for redudency. If a square has the same number its an exact copy in both positions!</b></p>
      <div style="display: inline-block;">
        <div style="border-style: solid;border-color: gray;border-width: 0px; float:left; margin-right: 50px;">
          <canvas width = "420" height = "420" id="canvas2"></canvas>
        </div>

        <div style="border-style: solid; border-color: black; border-width: 2px; float:right; display:block; padding-right:3px;">

          <div>
          <input type="checkbox" class="checkbox1" id="grid2" checked>
          <label>Grid</label>
          </div>

          <div>
          <input type="checkbox" class="checkbox1" id="camera_alignment2">
          <label style="color:MediumVioletRed;">Camera alignment</label>
          </div>

          <div>
          <input type="checkbox" class="checkbox1" id="formating_data2">
          <label style="color:blue;">Formating data</label>
          </div>

          <div>
          <input type="checkbox" class="checkbox1" id="data2">
          <label style="color:green;">Data</label>
          </div>

        </div>
      </div>
      <p>The math behind the error correction is too complicated and mostly not important (Especially for humans!) so I'm not going to give a detailed explination. About half of the data area is used for error correction.</p>
      <p>[Should I talk about low medium error correction levels?]</p>
      <p>However, the <b>mask pattern</b> (Lime green) <i>is</i> needed to properly deocde the data.</p>
      <p>A mask is used to make the data less "organized" and easier to read. Its easiest to show this with a picture! Can you tell how many boxes wide this is?</p>
      <img src="mask_1.png">
      <p>Its kind of hard! There is no way to tell where one square ends and the next begins. Now try this:</p>
      <img src="mask_3.png">
      <p>Much easier! Whenever you create a QR code there is an algorthem that chooses a mask pattern that minimzes the amount of continues colors.</p>
      <p>In the case above, I used mask pattern <b>101</b> which flips every other box to the opposite color. The picture below shows which ones I flipped to follow that mask pattern (F means the box was flipped):</p>
      <img src="mask_2.png">
      <p>There are 7 total mask patterns that you can apply to a QR code. The three lime green boxes indicate which one to use. Once you figure out which mask pattern is being used you just have to overlay the <b>data</b> section with it! Everytime the mask pattern has a black box you flip the color of the box below it.</p>

      <img src="masks.png" alt="Masks!">

      <p>The animation below shows the process of decoding the QR code. In this case the mask is still <b>101</b> so we just flip every other <b>data</b> box (Igore all <b>camera alignment</b> and <b>formating data</b> sections)! </p>
      <p>First, it goes over every single <b>data</b> square and puts an "F" where It needs to flip. It then flips all the "F" squares.</p>
      <button id = "animationstartbutton" type="button">Click to start animation!</button>
      <p></p>

      <div style="display: inline-block;">
        <div style="border-style: solid;border-color: gray;border-width: 0px; float:left; margin-right: 50px;">
          <canvas width = "420" height = "420" id="canvas3"></canvas>
        </div>

        <div style="border-style: solid; border-color: black; border-width: 2px; float:right; display:block; padding-right:3px;">

          <div>
          <input type="checkbox" class="checkbox1" id="grid3" checked>
          <label>Grid</label>
          </div>

          <div>
          <input type="checkbox" class="checkbox1" id="camera_alignment3">
          <label style="color:MediumVioletRed;">Camera alignment</label>
          </div>

          <div>
            <div>Speed:</div>
            <input id = "speedslider" type="range" min="50" max="1000" value="500">
          </div>

        </div>
      </div>
      <p>ADD TOGGLE TO TURN ON AND OFF NUMBERS!</p>
      <p> MAKE A BETTER VERSON OF THIS. Show where to find the mask pattern again and also talk about skipping the timing belts. </p>
      <p> Also add picture alightment color and format data colors </p>

      <h3>Reading the data</h3>

      <p>We have now unmasked the data! All there is left to do is to read the data itself.</p>
      <p>I've made a graphical representation of the data below.</p>

      <ul style="background: Cornsilk;">
        <li style="color: CornflowerBlue;">Data encoding <a style="color:black;"><b>[1]  </b></a></li>
        <li style="color: Crimson;">Length            <a style="color:black;"><b>[2]</b></a></li>
        <li style="color: ForestGreen;">Data (Characters)  <a style="color:black;"><b>[3-6]</b> * </a></li>
        <li style="color: DarkMagenta;">End of data     <a style="color:black;"><b>[7]</b></a></li>
        <li style="color: Coral;">Error correction     <a style="color:black;"><b>[8]</b></a></li>
        <i>* All shades of green are characters. They are different colors to differencate themselves.</i>
      </ul>

      <div style="display: inline-block;">
        <div style="border-style: solid;border-color: gray;border-width: 0px; float:left; margin-right: 50px;">
          <canvas width = "420" height = "420" id="canvas4"></canvas>
        </div>

        <div style="border-style: solid; border-color: black; border-width: 2px; float:right; display:block; padding-right:3px;">

          <div>
          <input type="checkbox" class="checkbox1" id="grid4" checked>
          <label>Grid</label>
          </div>

          <div>
          <input type="checkbox" class="checkbox1" id="camera_alignment4">
          <label style="color:MediumVioletRed;">Camera alignment</label>
          </div>

          <div>
          <input type="checkbox" class="checkbox1" id="formating_data4">
          <label style="color:blue;">Formating data</label>
          </div>

          <div>
          <input type="checkbox" class="checkbox1" id="data4">
          <label style="color:green;">Data</label>
          </div>

        </div>
      </div>
      <p><b><i>THIS IS STILL THE MASKED DATA! NEED TO SWITCHED TO UNMASKED!!!!!!!!!!!!!!!!!!!</b></i></p>
      <p>Also make sure to add number toggle :)</p>

      <h3>Understaning the sections</h3>
      <p>The first section, <b>data encoding</b> is simple! <b>Data encoding</b> is how and what data is being stored. Because you can store URLS, letters, numbers and much more in QR codes and these 4 squares tell what is in the given QR code!</p>
      <p><b>Length</b> is just the length (In 8 square sections) of the data! In our case (length 4), the length indicates how many letters are being stored but depending on what is encoded it might not exactly match up.</p>
      <p><b>Characters / data</b> is by far the most important part of the QR code. These sections contain the letters or numbers that actaully make up the</p>
      <h3>Readin the squares</h3>
      <p>Now that we know what the firt two squares represent we need to be able to actaully read them! I will skip the encoding section as it is isn't useful for decoding URLs or text.</p>
      <p>To read the squares</p>



      <p>All the data stored in the QR code is in binary. The black squares are ones and the white squares are zeros! However, explaining binary is too complex of a topic for this page so I'm going to give you an easier way of reading the data from the QR code.</p>
      <p>First, look at the diagram below. This diagram has the basic structure of all QR codes! The first four squares are for encoding mode (e.g is the QR code storing a number, URL, or something else!)</p>
      <p>The next 8 squares tell you the length of the data stored. In our case, each rectangle only stores one letter so this is the length of our word!</p>

      <p>Lets see how long our word is in our QR code!</p>

      <p>QR code is opposite direction. AKA 128 is at 1 instead of 8...</p>


      <p>Before we are able to read the <b>data</b> we need to understand how to read binary! Luckily, its not difficult.</p>

      <p>As you probably know, binary is just a buncy of ones and zeros. We call each one or zero a <b>bit</b>! For example 101001 would be 6 <b>bits</b>. Because our QR code is an image and not a string of numbers we represent 1's as black boxes and 0s as white (Think of it like white being the default (0) and black being "on" (1)).</p>
      <p>One bit by itself can't store much (Only 1 or 0!) so we combine a set of <b>bits</b> into. In our case we will be These bytes will each represent one number or letter!</p>
      <img src="bitsandstuff.png">&nbsp;&nbsp;&nbsp;<i>  This would be <b>10011</b></i></img>

      <p>This is what a QR code looks like when its split up into the different sections:</p>
      <img src="qr_code_data_layout.png" alt="QR code!"></img>

      <p>The actaul data is in the 1 <b>byte</b> sections but there are also some 4 bit sections (Called <b>nibbles</b>!). They are just for giving the encoding type of the data and to indicate where the data ends and the error correction starts. </p>
      <img src="direction.png"></img>
      <p>The image above shows you what direction to read the binary! Depending on the direction, the order of the bits is different.</p>
      <img src="order.png"><i>This would be <b>01100001</b></i></img>
      <p>Technically this is good enough! If you look up <b>01100001</b> you'll see its the letter "a" which is correct. However, this is a sort of impractical! A better way to do this is to add up the squares and use a table.</p>
      <img src="numbers.png"><i>Adding all the black bits up you get 1 + 32 + 64 = 97</i></img>
      <p>Using this table we can look up 97 and we get "a"! This method is a little more practical as you can also use it to get the length of the text from the second QR code data point</p>
      <img src="table.png"></img>
      <p>[FIX ABOVE SENTENCE]</p>

      <!-->
        1. Make sure understand what binary is.
        2. Explain how 1, 0 is black and white in QR code
        3. Explain the layout of the QR code. (e.g enc, then length, then 8 bit segments)
        4. Explain how to read it. Different direction is different order
        5. Explain how to add up (1 + 32 + 64) and to use table.
      <-->

    </div>
  </body>

</html>
